import{r as n}from"./index.CC6F48bw.js";import{P as m,b as p,g as _,d as M,R as U}from"./index.CdjtmQ3O.js";import{u as x}from"./index.pbU8kGmJ.js";import{j as b}from"./createLucideIcon.CyPHmFJx.js";function P(t){const e=n.useRef(t);return n.useEffect(()=>{e.current=t}),n.useMemo(()=>(...s)=>e.current?.(...s),[])}function j(t,e=globalThis?.document){const s=P(t);n.useEffect(()=>{const o=r=>{r.key==="Escape"&&s(r)};return e.addEventListener("keydown",o,{capture:!0}),()=>e.removeEventListener("keydown",o,{capture:!0})},[s,e])}var z="DismissableLayer",h="dismissableLayer.update",H="dismissableLayer.pointerDownOutside",K="dismissableLayer.focusOutside",w,T=n.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),X=n.forwardRef((t,e)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:o,onPointerDownOutside:r,onFocusOutside:a,onInteractOutside:d,onDismiss:l,...E}=t,u=n.useContext(T),[c,F]=n.useState(null),f=c?.ownerDocument??globalThis?.document,[,I]=n.useState({}),S=x(e,i=>F(i)),D=Array.from(u.layers),[A]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),N=D.indexOf(A),O=c?D.indexOf(c):-1,W=u.layersWithOutsidePointerEventsDisabled.size>0,L=O>=N,k=G(i=>{const v=i.target,R=[...u.branches].some(y=>y.contains(v));!L||R||(r?.(i),d?.(i),i.defaultPrevented||l?.())},f),C=J(i=>{const v=i.target;[...u.branches].some(y=>y.contains(v))||(a?.(i),d?.(i),i.defaultPrevented||l?.())},f);return j(i=>{O===u.layers.size-1&&(o?.(i),!i.defaultPrevented&&l&&(i.preventDefault(),l()))},f),n.useEffect(()=>{if(c)return s&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(w=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(c)),u.layers.add(c),g(),()=>{s&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=w)}},[c,f,s,u]),n.useEffect(()=>()=>{c&&(u.layers.delete(c),u.layersWithOutsidePointerEventsDisabled.delete(c),g())},[c,u]),n.useEffect(()=>{const i=()=>I({});return document.addEventListener(h,i),()=>document.removeEventListener(h,i)},[]),b.jsx(m.div,{...E,ref:S,style:{pointerEvents:W?L?"auto":"none":void 0,...t.style},onFocusCapture:p(t.onFocusCapture,C.onFocusCapture),onBlurCapture:p(t.onBlurCapture,C.onBlurCapture),onPointerDownCapture:p(t.onPointerDownCapture,k.onPointerDownCapture)})});X.displayName=z;var Y="DismissableLayerBranch",q=n.forwardRef((t,e)=>{const s=n.useContext(T),o=n.useRef(null),r=x(e,o);return n.useEffect(()=>{const a=o.current;if(a)return s.branches.add(a),()=>{s.branches.delete(a)}},[s.branches]),b.jsx(m.div,{...t,ref:r})});q.displayName=Y;function G(t,e=globalThis?.document){const s=P(t),o=n.useRef(!1),r=n.useRef(()=>{});return n.useEffect(()=>{const a=l=>{if(l.target&&!o.current){let E=function(){B(H,s,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=E,e.addEventListener("click",r.current,{once:!0})):E()}else e.removeEventListener("click",r.current);o.current=!1},d=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(d),e.removeEventListener("pointerdown",a),e.removeEventListener("click",r.current)}},[e,s]),{onPointerDownCapture:()=>o.current=!0}}function J(t,e=globalThis?.document){const s=P(t),o=n.useRef(!1);return n.useEffect(()=>{const r=a=>{a.target&&!o.current&&B(K,s,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,s]),{onFocusCapture:()=>o.current=!0,onBlurCapture:()=>o.current=!1}}function g(){const t=new CustomEvent(h);document.dispatchEvent(t)}function B(t,e,s,{discrete:o}){const r=s.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:s});e&&r.addEventListener(t,e,{once:!0}),o?_(r,a):r.dispatchEvent(a)}var Q="Portal",V=n.forwardRef((t,e)=>{const{container:s,...o}=t,[r,a]=n.useState(!1);M(()=>a(!0),[]);const d=s||r&&globalThis?.document?.body;return d?U.createPortal(b.jsx(m.div,{...o,ref:e}),d):null});V.displayName=Q;export{X as D,V as P,P as u};
