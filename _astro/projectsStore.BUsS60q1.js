import{c as l}from"./createLucideIcon.CyPHmFJx.js";import{s as p}from"./site.config.B_erQA_I.js";import{C as m,a as d}from"./skeleton.D4AyshpS.js";import{c as y,p as k}from"./middleware.CsEsK0Mx.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],H=l("archive",P);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],I=l("file-text",S);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=[["circle",{cx:"12",cy:"18",r:"3",key:"1mpf1b"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["path",{d:"M18 9v2c0 .6-.4 1-1 1H7c-.6 0-1-.4-1-1V9",key:"1uq4wg"}],["path",{d:"M12 12v3",key:"158kv8"}]],T=l("git-fork",C);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["line",{x1:"6",x2:"6",y1:"9",y2:"21",key:"rroup"}]],z=l("git-pull-request",_);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],N=l("star",L),g=m.GITHUB_REPOS,v={JavaScript:"#f1e05a",TypeScript:"#3178c6",Python:"#3572A5",Zig:"#ec915c",Rust:"#dea584",Go:"#00ADD8",Java:"#b07219","C++":"#f34b7d",C:"#555555","C#":"#178600",Ruby:"#701516",PHP:"#4F5D95",Swift:"#F05138",Kotlin:"#A97BFF",Dart:"#00B4AB",HTML:"#e34c26",CSS:"#563d7c",Shell:"#89e051",Lua:"#000080",Vue:"#41b883",Svelte:"#ff3e00",Astro:"#ff5d01",SCSS:"#c6538c",Markdown:"#083fa1"};function E(t){return t&&v[t]||"#6e7681"}function f(){if(typeof window>"u")return null;try{const t=localStorage.getItem(g);if(!t)return null;const a=JSON.parse(t);return Date.now()-a.timestamp<d?a:(localStorage.removeItem(g),null)}catch{return null}}function F(t){if(!(typeof window>"u"))try{const a=Date.now(),e={data:t,timestamp:a,expiresAt:a+d};localStorage.setItem(g,JSON.stringify(e))}catch{}}async function G(t=p.github.username,a=!1){if(!a){const n=f();if(n)return console.log("Using cached GitHub repositories"),n.data}console.log("Fetching GitHub repositories from API...");const e=[];let r=1,o=!0;for(;o;){const n=`https://api.github.com/users/${t}/repos?per_page=100&page=${r}&sort=updated&direction=desc&type=owner`;try{const i=await fetch(n,{headers:{Accept:"application/vnd.github.v3+json","User-Agent":"muhammad-fiaz-portfolio"}});if(!i.ok){if(i.headers.get("X-RateLimit-Remaining")==="0"){console.warn("GitHub API rate limit reached. Using cached data if available.");const h=f();if(h)return h.data}throw new Error(`GitHub API error: ${i.status}`)}const c=await i.json();c.length===0?o=!1:(e.push(...c),r++,c.length<100&&(o=!1))}catch(i){console.error("Error fetching repositories:",i);const c=f();if(c)return console.log("Returning cached data due to API error"),c.data;throw i}}const s=e.filter(n=>!p.github.excludedRepos.includes(n.name));return F(s),s}function j(t){const a=new Date(t),r=Math.floor((new Date().getTime()-a.getTime())/1e3);return r<60?"just now":r<3600?`${Math.floor(r/60)}m ago`:r<86400?`${Math.floor(r/3600)}h ago`:r<604800?`${Math.floor(r/86400)}d ago`:r<2592e3?`${Math.floor(r/604800)}w ago`:r<31536e3?`${Math.floor(r/2592e3)}mo ago`:`${Math.floor(r/31536e3)}y ago`}function U(t){return t>=1e6?`${(t/1e6).toFixed(1)}M`:t>=1e3?`${(t/1e3).toFixed(1)}k`:t.toString()}const w={search:"",language:"",sort:"stars",direction:"desc",showForks:!0,showArchived:!1},u=y()(k((t,a)=>({repositories:[],isLoading:!1,error:null,lastFetched:null,filters:w,currentPage:1,perPage:12,setRepositories:e=>t({repositories:e,error:null,isLoading:!1}),setLoading:e=>t({isLoading:e}),setError:e=>t({error:e,isLoading:!1}),setLastFetched:e=>t({lastFetched:e}),setSearch:e=>t(r=>({filters:{...r.filters,search:e},currentPage:1})),setLanguage:e=>t(r=>({filters:{...r.filters,language:e},currentPage:1})),setSort:e=>t(r=>({filters:{...r.filters,sort:e},currentPage:1})),setSortDirection:e=>t(r=>({filters:{...r.filters,direction:e}})),toggleSortDirection:()=>t(e=>({filters:{...e.filters,direction:e.filters.direction==="asc"?"desc":"asc"}})),setShowForks:e=>t(r=>({filters:{...r.filters,showForks:e},currentPage:1})),setShowArchived:e=>t(r=>({filters:{...r.filters,showArchived:e},currentPage:1})),resetFilters:()=>t({filters:w,currentPage:1}),setCurrentPage:e=>t({currentPage:e}),setPerPage:e=>t({perPage:e,currentPage:1}),nextPage:()=>t(e=>({currentPage:e.currentPage+1})),prevPage:()=>t(e=>({currentPage:Math.max(1,e.currentPage-1)})),shouldRefetch:()=>{const{lastFetched:e}=a();return e?Date.now()-e>d:!0}}),{name:"projects-storage",partialize:t=>({repositories:t.repositories,lastFetched:t.lastFetched,filters:t.filters,perPage:t.perPage})}));function M(){const{repositories:t,filters:a}=u();return t.filter(e=>{if(a.search){const r=a.search.toLowerCase();if(!(e.name.toLowerCase().includes(r)||e.description?.toLowerCase().includes(r)||e.topics?.some(s=>s.toLowerCase().includes(r))))return!1}return!(a.language&&e.language?.toLowerCase()!==a.language.toLowerCase()||!a.showForks&&e.fork||!a.showArchived&&e.archived)})}function A(){const t=M(),{filters:a}=u();return[...t].sort((e,r)=>{let o,s;switch(a.sort){case"stars":o=e.stargazers_count,s=r.stargazers_count;break;case"forks":o=e.forks_count,s=r.forks_count;break;case"updated":o=new Date(e.updated_at).getTime(),s=new Date(r.updated_at).getTime();break;case"created":o=new Date(e.created_at).getTime(),s=new Date(r.created_at).getTime();break;case"name":o=e.name.toLowerCase(),s=r.name.toLowerCase();break;default:o=e.stargazers_count,s=r.stargazers_count}return typeof o=="string"&&typeof s=="string"?a.direction==="asc"?o.localeCompare(s):s.localeCompare(o):a.direction==="asc"?o-s:s-o})}function V(){const t=A(),{currentPage:a,perPage:e}=u(),r=(a-1)*e,o=r+e;return{repos:t.slice(r,o),totalCount:t.length,totalPages:Math.ceil(t.length/e),hasNextPage:o<t.length,hasPrevPage:a>1}}function O(){const{repositories:t}=u(),a={};let e=0,r=0,o=0;for(const n of t)e+=n.stargazers_count,r+=n.forks_count,o+=n.watchers_count,n.language&&(a[n.language]=(a[n.language]||0)+1);const s=Object.entries(a).sort(([,n],[,i])=>i-n).map(([n,i])=>({language:n,count:i}));return{totalRepos:t.length,totalStars:e,totalForks:r,totalWatchers:o,languages:s,topLanguage:s[0]?.language||"Unknown"}}export{H as A,I as F,T as G,N as S,V as a,O as b,G as c,z as d,j as e,U as f,E as g,u};
