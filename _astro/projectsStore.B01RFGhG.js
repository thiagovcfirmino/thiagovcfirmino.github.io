import{c as l}from"./createLucideIcon.CyPHmFJx.js";import{c as g,p as d}from"./middleware.CsEsK0Mx.js";import{a as f}from"./skeleton.D4AyshpS.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],L=l("archive",h);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],F=l("file-text",p);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["line",{x1:"6",x2:"6",y1:"9",y2:"21",key:"rroup"}]],x=l("git-pull-request",w),u={search:"",language:"",sort:"stars",direction:"desc",showForks:!0,showArchived:!1},c=g()(d((t,a)=>({repositories:[],isLoading:!1,error:null,lastFetched:null,filters:u,currentPage:1,perPage:12,setRepositories:e=>t({repositories:e,error:null,isLoading:!1}),setLoading:e=>t({isLoading:e}),setError:e=>t({error:e,isLoading:!1}),setLastFetched:e=>t({lastFetched:e}),setSearch:e=>t(r=>({filters:{...r.filters,search:e},currentPage:1})),setLanguage:e=>t(r=>({filters:{...r.filters,language:e},currentPage:1})),setSort:e=>t(r=>({filters:{...r.filters,sort:e},currentPage:1})),setSortDirection:e=>t(r=>({filters:{...r.filters,direction:e}})),toggleSortDirection:()=>t(e=>({filters:{...e.filters,direction:e.filters.direction==="asc"?"desc":"asc"}})),setShowForks:e=>t(r=>({filters:{...r.filters,showForks:e},currentPage:1})),setShowArchived:e=>t(r=>({filters:{...r.filters,showArchived:e},currentPage:1})),resetFilters:()=>t({filters:u,currentPage:1}),setCurrentPage:e=>t({currentPage:e}),setPerPage:e=>t({perPage:e,currentPage:1}),nextPage:()=>t(e=>({currentPage:e.currentPage+1})),prevPage:()=>t(e=>({currentPage:Math.max(1,e.currentPage-1)})),shouldRefetch:()=>{const{lastFetched:e}=a();return e?Date.now()-e>f:!0}}),{name:"projects-storage",partialize:t=>({repositories:t.repositories,lastFetched:t.lastFetched,filters:t.filters,perPage:t.perPage})}));function P(){const{repositories:t,filters:a}=c();return t.filter(e=>{if(a.search){const r=a.search.toLowerCase();if(!(e.name.toLowerCase().includes(r)||e.description?.toLowerCase().includes(r)||e.topics?.some(o=>o.toLowerCase().includes(r))))return!1}return!(a.language&&e.language?.toLowerCase()!==a.language.toLowerCase()||!a.showForks&&e.fork||!a.showArchived&&e.archived)})}function k(){const t=P(),{filters:a}=c();return[...t].sort((e,r)=>{let s,o;switch(a.sort){case"stars":s=e.stargazers_count,o=r.stargazers_count;break;case"forks":s=e.forks_count,o=r.forks_count;break;case"updated":s=new Date(e.updated_at).getTime(),o=new Date(r.updated_at).getTime();break;case"created":s=new Date(e.created_at).getTime(),o=new Date(r.created_at).getTime();break;case"name":s=e.name.toLowerCase(),o=r.name.toLowerCase();break;default:s=e.stargazers_count,o=r.stargazers_count}return typeof s=="string"&&typeof o=="string"?a.direction==="asc"?s.localeCompare(o):o.localeCompare(s):a.direction==="asc"?s-o:o-s})}function C(){const t=k(),{currentPage:a,perPage:e}=c(),r=(a-1)*e,s=r+e;return{repos:t.slice(r,s),totalCount:t.length,totalPages:Math.ceil(t.length/e),hasNextPage:s<t.length,hasPrevPage:a>1}}function v(){const{repositories:t}=c(),a={};let e=0,r=0,s=0;for(const n of t)e+=n.stargazers_count,r+=n.forks_count,s+=n.watchers_count,n.language&&(a[n.language]=(a[n.language]||0)+1);const o=Object.entries(a).sort(([,n],[,i])=>i-n).map(([n,i])=>({language:n,count:i}));return{totalRepos:t.length,totalStars:e,totalForks:r,totalWatchers:s,languages:o,topLanguage:o[0]?.language||"Unknown"}}export{L as A,F,x as G,C as a,v as b,c as u};
